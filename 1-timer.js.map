{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nlet userSelectedDate;\nconst dateInput = document.querySelector('#datetime-picker');\nconst buttonStart = document.querySelector('button[data-start]');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\nbuttonStart.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < Date.now()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topCenter',\n        backgroundColor: '#ef4040',\n        titleColor: 'white',\n        messageColor: 'white',\n        iconUrl: 'https://img.icons8.com/ios-filled/50/ffffff/delete-sign.png',\n        progressBarColor: '#a94442',\n        timeout: 10000,\n        close: true,\n        closeOnClick: true,\n        transitionIn: 'fadeIn',\n        transitionOut: 'fadeOut',\n      });\n    } else {\n      buttonStart.disabled = false;\n      userSelectedDate = selectedDates[0].getTime();\n    }\n  },\n};\n\nbuttonStart.addEventListener('click', startTimer);\nlet timerInt = null;\n\nfunction startTimer() {\n  if (userSelectedDate > Date.now()) {\n    buttonStart.disabled = true;\n    dateInput.disabled = true;\n    timerInt = setInterval(() => {\n      const timeRemainingUnix = userSelectedDate - Date.now();\n      if (timeRemainingUnix <= 0) {\n        clearInterval(timerInt);\n        dateInput.disabled = false;\n        return;\n      }\n      const timeRemaining = convertMs(timeRemainingUnix);\n      days.textContent = timeRemaining.days;\n      hours.textContent = timeRemaining.hours;\n      minutes.textContent = timeRemaining.minutes;\n      seconds.textContent = timeRemaining.seconds;\n    }, 1000);\n  } else {\n    clearInterval(timerInt);\n    dateInput.disabled = false;\n    days.textContent = '00';\n    hours.textContent = '00';\n    minutes.textContent = '00';\n    seconds.textContent = '00';\n    return;\n  }\n}\n\nconst getDate = new flatpickr(dateInput, options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  // returning remaining time using function addLeadingZero to make XX format of value\n  return {\n    days: addLeadingZero(days),\n    hours: addLeadingZero(hours),\n    minutes: addLeadingZero(minutes),\n    seconds: addLeadingZero(seconds),\n  };\n}\n\nfunction addLeadingZero(value) {\n  return (value = String(value).padStart(2, '0'));\n}\n"],"names":["userSelectedDate","dateInput","buttonStart","days","hours","minutes","seconds","options","selectedDates","iziToast","startTimer","timerInt","timeRemainingUnix","timeRemaining","convertMs","flatpickr","ms","addLeadingZero","value"],"mappings":"+IAKA,IAAIA,EACJ,MAAMC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EACvDJ,EAAY,SAAW,GAEvB,MAAMK,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAI,KAAK,IAAG,EAC7BC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,YACV,gBAAiB,UACjB,WAAY,QACZ,aAAc,QACd,QAAS,8DACT,iBAAkB,UAClB,QAAS,IACT,MAAO,GACP,aAAc,GACd,aAAc,SACd,cAAe,SACvB,CAAO,GAEDP,EAAY,SAAW,GACvBF,EAAmBQ,EAAc,CAAC,EAAE,QAAS,EAEhD,CACH,EAEAN,EAAY,iBAAiB,QAASQ,CAAU,EAChD,IAAIC,EAAW,KAEf,SAASD,GAAa,CACpB,GAAIV,EAAmB,KAAK,MAC1BE,EAAY,SAAW,GACvBD,EAAU,SAAW,GACrBU,EAAW,YAAY,IAAM,CAC3B,MAAMC,EAAoBZ,EAAmB,KAAK,IAAK,EACvD,GAAIY,GAAqB,EAAG,CAC1B,cAAcD,CAAQ,EACtBV,EAAU,SAAW,GACrB,MACR,CACM,MAAMY,EAAgBC,EAAUF,CAAiB,EACjDT,EAAK,YAAcU,EAAc,KACjCT,EAAM,YAAcS,EAAc,MAClCR,EAAQ,YAAcQ,EAAc,QACpCP,EAAQ,YAAcO,EAAc,OACrC,EAAE,GAAI,MACF,CACL,cAAcF,CAAQ,EACtBV,EAAU,SAAW,GACrBE,EAAK,YAAc,KACnBC,EAAM,YAAc,KACpBC,EAAQ,YAAc,KACtBC,EAAQ,YAAc,KACtB,MACJ,CACA,CAEgB,IAAIS,EAAUd,EAAWM,CAAO,EAEhD,SAASO,EAAUE,EAAI,CAQrB,MAAMb,EAAO,KAAK,MAAMa,EAAK,KAAG,EAE1BZ,EAAQ,KAAK,MAAOY,EAAK,MAAO,IAAI,EAEpCX,EAAU,KAAK,MAAQW,EAAK,MAAO,KAAQ,GAAM,EAEjDV,EAAU,KAAK,MAASU,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CACL,KAAMC,EAAed,CAAI,EACzB,MAAOc,EAAeb,CAAK,EAC3B,QAASa,EAAeZ,CAAO,EAC/B,QAASY,EAAeX,CAAO,CAChC,CACH,CAEA,SAASW,EAAeC,EAAO,CAC7B,OAAQA,EAAQ,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CAC/C"}